<div class="row justify-content-md-center">
  <mat-card class="col-md-10 backGroundCard">
    <mat-card-title style="text-align: center">Asignar alumno a un curso</mat-card-title>
    <mat-card-content>
      <mat-vertical-stepper [linear]="isLinear" #stepper style="background-color: #E8EAF6">
        
        <!-- STEP ALUMNO -->
        <mat-step label="Seleccionar alumno" [stepControl]="alumnoFormGroup">
          <!-- Buscador -->
          <div class="row">
            <!-- Buscador -->
            <div class="col-sm-6">
              <mat-form-field class="col-sm-12">
                <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Buscar alumno">
              </mat-form-field>
            </div>
          </div>
          <!-- Tabla de alumnos -->
          <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">

            <!-- Columna DNI -->
            <ng-container matColumnDef="dni">
              <th mat-header-cell *matHeaderCellDef>DNI</th>
              <td mat-cell *matCellDef="let alumno">{{alumno.DNIAlumno}}</td>
            </ng-container>

            <!-- Columna Apellido -->
            <ng-container matColumnDef="apellido">
              <th mat-header-cell *matHeaderCellDef>Apellido</th>
              <td mat-cell *matCellDef="let alumno">{{alumno.apellido}}</td>
            </ng-container>

            <!-- Columna Nombre -->
            <ng-container matColumnDef="nombre">
              <th mat-header-cell *matHeaderCellDef>Nombre</th>
              <td mat-cell *matCellDef="let alumno">{{alumno.nombre}}</td>
            </ng-container>

            <!-- Columna operaciones -->
            <ng-container matColumnDef="seleccionar">
              <th mat-header-cell *matHeaderCellDef style="text-align: center">Seleccionar alumno</th>
              <td mat-cell *matCellDef="let alumno" style="text-align: center" [formGroup]="alumnoFormGroup">
                <mat-radio-group formControlName="seleccionado">
                  <mat-radio-button value="Selected" (click)="seleccionAlumno(alumno)" aria-required="true">
                  </mat-radio-button>
                </mat-radio-group>
              </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
          </table>
          <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>

          <!-- Boton siguiente del stepper -->
          <div style="text-align: right">
            <button mat-raised-button color="primary" matStepperNext>Siguiente
              <mat-icon>arrow_forward</mat-icon>
            </button>
          </div>
        </mat-step>

        <!-- STEP CRUSO -->
        <mat-step label="Seleccionar curso" [stepControl]="cursoFormGroup">
          <!-- Buscador -->
          <div class="row">
            <!-- Buscador -->
            <div class="col-sm-6">
              <mat-form-field class="col-sm-12">
                <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Buscar curso">
              </mat-form-field>
            </div>
          </div>
          <!-- Tabla de alumnos -->
          <table mat-table [dataSource]="dataCurso" class="mat-elevation-z8">

            <!-- Columna NIVEL -->
            <ng-container matColumnDef="nivel">
              <th mat-header-cell *matHeaderCellDef>Nivel</th>
              <td mat-cell *matCellDef="let curso">
                <div *ngIf="curso.idNivel == 1">Primaria</div>
                <div *ngIf="curso.idNivel == 2">Secundaria</div>
              </td>
            </ng-container>

            <!-- Columna CURSO -->
            <ng-container matColumnDef="curso">
              <th mat-header-cell *matHeaderCellDef>Curso</th>
              <td mat-cell *matCellDef="let curso">{{curso.nombre}}</td>
            </ng-container>

            <!-- Columna DIVISION -->
            <ng-container matColumnDef="division">
              <th mat-header-cell *matHeaderCellDef>División</th>
              <td mat-cell *matCellDef="let curso">{{curso.division}}</td>
            </ng-container>

            <!-- Columna operaciones -->
            <ng-container matColumnDef="seleccionar">
              <th mat-header-cell *matHeaderCellDef style="text-align: center">Seleccionar curso</th>
              <td mat-cell *matCellDef="let curso" style="text-align: center" [formGroup]="cursoFormGroup">
                <mat-radio-group formControlName="seleccionado">
                  <mat-radio-button value="Selected" (click)="seleccionCurso(curso)" aria-required="true">
                  </mat-radio-button>
                </mat-radio-group>
              </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="columnasCurso; sticky: true"></tr>
            <tr mat-row *matRowDef="let row; columns: columnasCurso;"></tr>
          </table>
          <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>

          <!-- Vovler o continuar-->
          <div class="d-flex justify-content-between">
            <button mat-raised-button color="primary" matStepperPrevious>
              <mat-icon>arrow_back</mat-icon>
              Volver
            </button>
            <button mat-raised-button color="primary" matStepperNext>Siguiente
              <mat-icon>arrow_forward</mat-icon>
            </button>
          </div>
        </mat-step>

        <!-- Step FINALIZAR -->
        <mat-step label="Finalizar">
          <div class="d-flex justify-content-center">
            <button mat-raised-button (click)="stepper.reset()" color="warn">
              <mat-icon>refresh</mat-icon>
              Reiniciar
            </button>
            <!-- Submit -->
            <button type="submit" (click)="asignarAlumno()" mat-raised-button
              color="primary">
              <mat-icon>check</mat-icon>
              Confirmar asignación
            </button>
          </div>
        </mat-step>
      </mat-vertical-stepper>


    </mat-card-content>
  </mat-card>
</div>