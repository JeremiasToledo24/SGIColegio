<div class="row justify-content-md-center">
  <mat-card class="col-md-10 backGroundCard">
    <mat-card-title style="text-align: center">Inscribir nuevo alumno</mat-card-title>
    <mat-card-content>
      <mat-vertical-stepper [linear]="isLinear" #stepper style="background-color: #E8EAF6">

        <!-- Step REGISTRAR DATOS GENERALES DEL ALUMNO -->
        <mat-step label="Registrar datos generales del alumno" [stepControl]="alumnoFormGroup">
          <form [formGroup]="alumnoFormGroup" #alumnoForm="ngForm">
            <!-- Datos personales -->
            <mat-card id="datosPersonales">
              <mat-card-title style="font-size: 100%">Datos personales</mat-card-title>
              <!-- Nombre -->
              <mat-form-field appearance="outline" hideRequiredMarker class="col-sm-6">
                <mat-label>Nombre</mat-label>
                <input formControlName="nombre" type="text" required matInput>
              </mat-form-field>

              <!-- Apellido -->
              <mat-form-field appearance="outline" hideRequiredMarker class="col-sm-6">
                <mat-label>Apellido</mat-label>
                <input formControlName="apellido" type="text" required matInput>
              </mat-form-field>

              <!-- Sexo -->
              <mat-form-field appearance="outline" hideRequiredMarker class="col-sm-4">
                <mat-label>Sexo</mat-label>
                <mat-select formControlName="sexo" required>
                  <mat-option value="M">Masculino</mat-option>
                  <mat-option value="F">Femenino</mat-option>
                  <mat-option value="O">Otro</mat-option>
                </mat-select>
              </mat-form-field>

              <!-- DNI -->
              <mat-form-field appearance="outline" hideRequiredMarker class="col-sm-4">
                <mat-label>DNI</mat-label>
                <input formControlName="DNIAlumno" type="number" required matInput>
              </mat-form-field>

              <!-- CUIL -->
              <mat-form-field appearance="outline" hideRequiredMarker class="col-sm-4">
                <mat-label>CUIL</mat-label>
                <input formControlName="cuil" type="text" required matInput>
              </mat-form-field>

              <!-- Fecha de nacimiento -->
              <mat-form-field appearance="outline" hideRequiredMarker class="col-sm-4">
                <mat-label>Fecha de nacimiento</mat-label>
                <input type="date" formControlName="fechaNacimiento" required matInput>
              </mat-form-field>

              <!-- Domicilio -->
              <mat-form-field appearance="outline" hideRequiredMarker class="col-sm-8">
                <mat-label>Domicilio</mat-label>
                <input formControlName="domicilio" type="string" required matInput>
              </mat-form-field>

              <!-- Datos de contacto -->
              <mat-card-title style="font-size: 100%">Datos de contacto</mat-card-title>

              <!-- Telefono -->
              <mat-form-field appearance="outline" hideRequiredMarker class="col-sm-4">
                <mat-label>Telefono</mat-label>
                <input formControlName="telefono" type="text" matInput>
              </mat-form-field>

              <!-- Correo electrónico -->
              <mat-form-field appearance="outline" hideRequiredMarker class="col-sm-8">
                <mat-label>Correo electrónico</mat-label>
                <input formControlName="correo" type="email" email matInput>
              </mat-form-field>
            </mat-card>

            <!-- Boton siguiente del stepper -->
            <div style="text-align: right">
              <button mat-raised-button color="primary" matStepperNext (click)="setDNIAlumno(alumnoForm)">Siguiente
                <mat-icon>arrow_forward</mat-icon>
              </button>
            </div>
          </form>
        </mat-step>

        <!-- Step TUTOR LEGAL -->
        <mat-step label="Registrar tutor legal del alumno" [stepControl]="tutorFormGroup">
          <mat-card>

            <!-- Datos personales del tutor-->
            <mat-card-title style="font-size: 100%">Datos personales</mat-card-title>
            <mat-card-content>
              <form [formGroup]="tutorFormGroup" #tutorForm="ngForm">
                <!-- Nombre -->
                <mat-form-field appearance="outline" hideRequiredMarker class="col-sm-6">
                  <mat-label>Nombre</mat-label>
                  <input formControlName="nombre" type="text" required matInput>
                </mat-form-field>

                <!-- Apellido -->
                <mat-form-field appearance="outline" hideRequiredMarker class="col-sm-6">
                  <mat-label>Apellido</mat-label>
                  <input formControlName="apellido" type="text" required matInput>
                </mat-form-field>

                <!-- Sexo -->
                <mat-form-field appearance="outline" hideRequiredMarker class="col-sm-4">
                  <mat-label>Sexo</mat-label>
                  <mat-select formControlName="sexo" required>
                    <mat-option value="M">Masculino</mat-option>
                    <mat-option value="F">Femenino</mat-option>
                    <mat-option value="O">Otro</mat-option>
                  </mat-select>
                </mat-form-field>

                <!-- DNI -->
                <mat-form-field appearance="outline" hideRequiredMarker class="col-sm-4">
                  <mat-label>DNI</mat-label>
                  <input formControlName="DNITutor" type="number" required matInput>
                </mat-form-field>

                <!-- CUIL -->
                <mat-form-field appearance="outline" hideRequiredMarker class="col-sm-4">
                  <mat-label>CUIL</mat-label>
                  <input formControlName="cuil" type="text" required matInput>
                </mat-form-field>

                <!-- Fecha de nacimiento -->
                <mat-form-field appearance="outline" hideRequiredMarker class="col-sm-4">
                  <mat-label>Fecha de nacimiento</mat-label>
                  <input type="date" formControlName="fechaNacimiento" required matInput>
                </mat-form-field>

                <!-- Domicilio -->
                <mat-form-field appearance="outline" hideRequiredMarker class="col-sm-8">
                  <mat-label>Domicilio</mat-label>
                  <input formControlName="domicilio" type="string" required matInput>
                </mat-form-field>

                <!-- Datos de contacto -->
                <mat-card-title style="font-size: 100%">Datos de contacto</mat-card-title>

                <!-- Telefono Personal-->
                <mat-form-field appearance="outline" hideRequiredMarker class="col-sm-4">
                  <mat-label>Telefono personal</mat-label>
                  <input formControlName="telefonoPersonal" type="text" matInput>
                </mat-form-field>

                <!-- Telefono Trabajo -->
                <mat-form-field appearance="outline" hideRequiredMarker class="col-sm-4">
                  <mat-label>Telefono laboral</mat-label>
                  <input formControlName="telefonoTrabajo" type="text" matInput>
                </mat-form-field>

                <!-- Correo electrónico -->
                <mat-form-field appearance="outline" hideRequiredMarker class="col-sm-4">
                  <mat-label>Correo electrónico</mat-label>
                  <input formControlName="correo" type="email" email matInput>
                </mat-form-field>

                <!-- Relacion con el alumno-->
                <mat-card-title style="font-size: 100%">Relación con el alumno</mat-card-title>
                <mat-form-field appearance="outline" hideRequiredMarker class="col-sm-6">
                  <mat-label>Parentezco</mat-label>
                  <input formControlName="parentezco" type="text" matInput>
                </mat-form-field>
              </form>
            </mat-card-content>
          </mat-card>

          <!-- Botones para volver o continuar en el Stepper-->
          <div class="d-flex justify-content-between">
            <button mat-raised-button color="primary" matStepperPrevious>
              <mat-icon>arrow_back</mat-icon>
              Volver
            </button>
            <button mat-raised-button color="primary" matStepperNext (click)="setDNIAlumno2(tutorForm)">Siguiente
              <mat-icon>arrow_forward</mat-icon>
            </button>
          </div>
        </mat-step>

        <!-- Step FICHA MEDICA -->
        <mat-step label="Registrar ficha médica del alumno" [stepControl]="fichaFormGroup">
          <mat-card>
            <mat-card-content>
              <form [formGroup]="fichaFormGroup" #fichaForm="ngForm">

                <!-- Contacto de emergencia -->
                <mat-card-title style="font-size: 100%">Contacto de emergencia</mat-card-title>
                <div>
                  <!-- Nombre y apellido -->
                  <mat-form-field appearance="outline" hideRequiredMarker class="col-sm-4">
                    <mat-label>Nombre y apellido</mat-label>
                    <input formControlName="emergenciaNom" type="text" required matInput>
                  </mat-form-field>

                  <!-- Teléfono -->
                  <mat-form-field appearance="outline" hideRequiredMarker class="col-sm-4">
                    <mat-label>Teléfono</mat-label>
                    <input formControlName="emergenciaTel" type="text" required matInput>
                  </mat-form-field>

                  <!-- Vínculo -->
                  <mat-form-field appearance="outline" hideRequiredMarker class="col-sm-4">
                    <mat-label>Vínculo</mat-label>
                    <input formControlName="emergenciaVinculo" type="text" required matInput>
                  </mat-form-field>
                </div>

                <!-- Medico de cabecera -->
                <mat-card-title style="font-size: 100%">¿Tiene médico de cabecera?</mat-card-title>
                <div>
                  <div class="col-sm-12">
                    <mat-radio-group formControlName="tieneMedicoCab">
                      <mat-radio-button value="Si" data-toggle="collapse" href="#medicoCollapse" aria-expanded="false"
                        aria-controls="medicoCollapse">Si
                      </mat-radio-button>
                      <mat-radio-button value="No" (click)="clearMedicoCabecera" style="margin-left: 1rem">No
                      </mat-radio-button>
                    </mat-radio-group>
                  </div>
                  <div class="collapse" id="medicoCollapse">
                    <!-- Nombre y apellido -->
                    <mat-form-field appearance="outline" hideRequiredMarker class="col-sm-4">
                      <mat-label>Nombre y apellido</mat-label>
                      <input formControlName="medicoCabNom" type="text" matInput>
                    </mat-form-field>

                    <!-- Telefono -->
                    <mat-form-field appearance="outline" hideRequiredMarker class="col-sm-4">
                      <mat-label>Telefono</mat-label>
                      <input formControlName="medicoCabTel" type="text" matInput>
                    </mat-form-field>
                  </div>
                </div>

                <!-- Obra social -->
                <mat-card-title style="font-size: 100%">¿Tiene obra social?</mat-card-title>
                <div>
                  <div class="col-sm-12">
                    <mat-radio-group formControlName="tieneObraSocial">
                      <mat-radio-button value="Si" data-toggle="collapse" href="#obraCollapse" aria-expanded="false"
                        aria-controls="obraCollapse">Si
                      </mat-radio-button>
                      <mat-radio-button value="No" style="margin-left: 1rem">No
                      </mat-radio-button>
                    </mat-radio-group>
                  </div>
                  <div class="collapse" id="obraCollapse">
                    <!-- Nombre Obra Social -->
                    <mat-form-field appearance="outline" hideRequiredMarker class="col-sm-4">
                      <mat-label>Nombre de obra social</mat-label>
                      <input formControlName="obraSocialNom" type="text" matInput>
                    </mat-form-field>

                    <!-- Numero de afiliado -->
                    <mat-form-field appearance="outline" hideRequiredMarker class="col-sm-4">
                      <mat-label>Número de afiliado</mat-label>
                      <input formControlName="obraSocialNroAfil" type="text" matInput>
                    </mat-form-field>
                  </div>
                </div>

                <!-- Medicación habitual -->
                <mat-card-title style="font-size: 100%">¿Toma alguna medicación habitual?</mat-card-title>
                <div>
                  <div class="col-sm-12">
                    <mat-radio-group formControlName="tieneMedHab">
                      <mat-radio-button value="Si" data-toggle="collapse" href="#medicacionCollapse"
                        aria-expanded="false" aria-controls="medicacionCollapse">Si
                      </mat-radio-button>
                      <mat-radio-button value="No" style="margin-left: 1rem">No
                      </mat-radio-button>
                    </mat-radio-group>
                  </div>
                  <div class="collapse" id="medicacionCollapse">
                    <!-- Nombre medicación -->
                    <mat-form-field appearance="outline" hideRequiredMarker class="col-sm-4">
                      <mat-label>Nombre de la medicación</mat-label>
                      <input formControlName="medHabNom" type="text" matInput>
                    </mat-form-field>

                    <!-- Dosis -->
                    <mat-form-field appearance="outline" hideRequiredMarker class="col-sm-4">
                      <mat-label>Dosis</mat-label>
                      <input formControlName="medHabDosis" type="text" matInput>
                    </mat-form-field>
                  </div>
                </div>

                <!-- Alergias -->
                <mat-card-title style="font-size: 100%">¿Tiene alguna alergia?</mat-card-title>
                <div>
                  <div class="col-sm-12">
                    <mat-radio-group formControlName="tieneAlergia">
                      <mat-radio-button value="Si" data-toggle="collapse" href="#alergiasCollapse" aria-expanded="false"
                        aria-controls="alergiasCollapse">Si
                      </mat-radio-button>
                      <mat-radio-button value="No" style="margin-left: 1rem">No
                      </mat-radio-button>
                    </mat-radio-group>
                  </div>
                  <div class="collapse" id="alergiasCollapse">
                    <!-- Medicación alergia -->
                    <div class="row">
                      <mat-form-field appearance="outline" hideRequiredMarker class="col-sm-4">
                        <mat-label>Medicación para la alergia</mat-label>
                        <input formControlName="alergiaMed" type="text" matInput>
                      </mat-form-field>
                    </div>

                    <!-- Detalle de alergia -->
                    <div class="row">
                      <mat-form-field appearance="outline" hideRequiredMarker class="col-sm-6">
                        <mat-label>Detalle de la alergia</mat-label>
                        <textarea formControlName="alergiaDetalle" matInput style="height: 5rem"></textarea>
                      </mat-form-field>
                    </div>
                  </div>
                </div>
              </form>
            </mat-card-content>
          </mat-card>

          <!-- Botones para volver o continuar en el Stepper-->
          <div class="d-flex justify-content-between">
            <button mat-raised-button color="primary" matStepperPrevious>
              <mat-icon>arrow_back</mat-icon>
              Volver
            </button>
            <button mat-raised-button color="primary" matStepperNext>Siguiente
              <mat-icon>arrow_forward</mat-icon>
            </button>
          </div>
        </mat-step>

        <!-- Step FINALIZAR -->
        <mat-step label="Finalizar">
          <div class="d-flex justify-content-center">
            <button mat-raised-button (click)="stepper.reset()" color="warn">
              <mat-icon>refresh</mat-icon>
              Reiniciar formulario
            </button>
            <!-- Submit -->
            <button type="submit" (click)="addAlumno(alumnoForm, tutorForm, fichaForm)" mat-raised-button
              color="primary">
              <mat-icon>check</mat-icon>
              Confirmar inscripción
            </button>
          </div>
        </mat-step>
      </mat-vertical-stepper>
    </mat-card-content>
  </mat-card>
</div>